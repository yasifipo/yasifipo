{% extends "base.html" %}

{% macro display_node(node) %}
{% if node['first_level'] == False %}
<li><a href="{{node['chapter_url']}}">{{node['chapter_title']}}</a>
{% endif %}
<ol>
{% for child in node['children'] %}
	{% if child['typ'] == 'dir' %}
		{{ display_node(child) }}
	{% else %}
	<li>
	<a href="{{child['url']}}">{{child['title']}}</a>
	</li>
	{% endif %}
{% endfor %}
</ol>
{% if node['first_level'] == False %}
</li>
{% endif %}
{% endmacro %}

{% block additional_scripts %}
{% if display_toc == True %}
<link rel="stylesheet" href="{{ toc_css }}">
{% endif %}
{% endblock %}

{% block title %}
{{title}}
{% endblock %}

{% block body %}
<div class='cucumber-toc'>
{% for i in cucumber %}
<a href="{{i['url']}}">{{i['title']}}</a> {% if i != cucumber[cucumber|length -1] %} > {% endif %}
{% endfor %}
</div>
{% if langs|length > 1 %}
<div>
	{% for lang in langs %}
	<a href="{{ lang['url'] }}">{{ lang['descr'] }}</a>
	{% endfor %}
</div>
{% endif %}
{{content}}

{% if display_toc == True %}
<div class='toc'>
{{display_node(toc_nodes)}}
</div>
{% endif %}
{% endblock %}
